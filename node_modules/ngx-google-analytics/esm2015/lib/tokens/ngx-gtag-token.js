import { InjectionToken, inject } from '@angular/core';
import { NGX_WINDOW } from './ngx-window-token';
import { NGX_DATA_LAYER } from './ngx-data-layer-token';
/**
 * Check if there is some global function called gtag on Window object, or create an empty function to doesn't brake codes...
 */
export function getGtagFn(window, dataLayer) {
    return (window)
        ? window['gtag'] = window['gtag'] || function () {
            dataLayer.push(arguments);
        }
        : null;
}
/**
 * Provides an injection token to access Google Analytics Gtag Function
 */
export const NGX_GTAG_FN = new InjectionToken('ngx-gtag-fn', {
    providedIn: 'root',
    factory: () => getGtagFn(inject(NGX_WINDOW), inject(NGX_DATA_LAYER))
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWd0YWctdG9rZW4uanMiLCJzb3VyY2VSb290IjoiLi4vLi4vLi4vcHJvamVjdHMvbmd4LWdvb2dsZS1hbmFseXRpY3Mvc3JjLyIsInNvdXJjZXMiOlsibGliL3Rva2Vucy9uZ3gtZ3RhZy10b2tlbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN2RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sb0JBQW9CLENBQUM7QUFHaEQsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBRXhEOztHQUVHO0FBQ0gsTUFBTSxVQUFVLFNBQVMsQ0FBQyxNQUFjLEVBQUUsU0FBb0I7SUFDNUQsT0FBTyxDQUFDLE1BQU0sQ0FBQztRQUNiLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJO1lBQ2pDLFNBQVMsQ0FBQyxJQUFJLENBQUMsU0FBZ0IsQ0FBQyxDQUFDO1FBQ25DLENBQUM7UUFDSCxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ1gsQ0FBQztBQUVEOztHQUVHO0FBQ0gsTUFBTSxDQUFDLE1BQU0sV0FBVyxHQUFHLElBQUksY0FBYyxDQUFTLGFBQWEsRUFBRTtJQUNuRSxVQUFVLEVBQUUsTUFBTTtJQUNsQixPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRSxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUM7Q0FDckUsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5qZWN0aW9uVG9rZW4sIGluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTkdYX1dJTkRPVyB9IGZyb20gJy4vbmd4LXdpbmRvdy10b2tlbic7XG5pbXBvcnQgeyBHdGFnRm4gfSBmcm9tICcuLi90eXBlcy9ndGFnLnR5cGUnO1xuaW1wb3J0IHsgRGF0YUxheWVyIH0gZnJvbSAnLi4vdHlwZXMvZGF0YS1sYXllci50eXBlJztcbmltcG9ydCB7IE5HWF9EQVRBX0xBWUVSIH0gZnJvbSAnLi9uZ3gtZGF0YS1sYXllci10b2tlbic7XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlcmUgaXMgc29tZSBnbG9iYWwgZnVuY3Rpb24gY2FsbGVkIGd0YWcgb24gV2luZG93IG9iamVjdCwgb3IgY3JlYXRlIGFuIGVtcHR5IGZ1bmN0aW9uIHRvIGRvZXNuJ3QgYnJha2UgY29kZXMuLi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEd0YWdGbih3aW5kb3c6IFdpbmRvdywgZGF0YUxheWVyOiBEYXRhTGF5ZXIpOiBHdGFnRm4ge1xuICByZXR1cm4gKHdpbmRvdylcbiAgICA/IHdpbmRvd1snZ3RhZyddID0gd2luZG93WydndGFnJ10gfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICBkYXRhTGF5ZXIucHVzaChhcmd1bWVudHMgYXMgYW55KTtcbiAgICAgIH1cbiAgICA6IG51bGw7XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYW4gaW5qZWN0aW9uIHRva2VuIHRvIGFjY2VzcyBHb29nbGUgQW5hbHl0aWNzIEd0YWcgRnVuY3Rpb25cbiAqL1xuZXhwb3J0IGNvbnN0IE5HWF9HVEFHX0ZOID0gbmV3IEluamVjdGlvblRva2VuPEd0YWdGbj4oJ25neC1ndGFnLWZuJywge1xuICBwcm92aWRlZEluOiAncm9vdCcsXG4gIGZhY3Rvcnk6ICgpID0+IGdldEd0YWdGbihpbmplY3QoTkdYX1dJTkRPVyksIGluamVjdChOR1hfREFUQV9MQVlFUikpXG59KTtcbiJdfQ==